
<script src="~/Scripts/jquery-3.3.1.min.js"></script>
<script src="~/Scripts/jquery.signalR-2.4.3.min.js"></script>
<script src="~/signalr/hubs"></script>

<style>
    table, tr, td, th {
        border: 1px solid #000;
        text-align:center;
    }

    td {
        padding:5px;
    }
    th {
        padding:10px;
    }
    body {
        display:flex;
        justify-content:center;
        align-items:center;
        padding:10px;
    }
</style>

<table>
    <thead>
        <tr>
            <th>Fiyat</th>
            <th>Oran</th>
            <th>Zaman</th>
            <th>Saat</th>
        </tr>
    </thead>
    <tbody id="dataContainer"></tbody>
</table>

<script>
    debugger;
    var connection = $.hubConnection();

    var borsaHubProxy = connection.createHubProxy('borsaHub');

    borsaHubProxy.on('updateBorsaVerileri', function (borsaVerileri) {

        var dataContainer = $("#dataContainer");

        dataContainer.html("");

        for (var i = 1; i < borsaVerileri.length - 1; i++) {
            dataContainer.append("<tr>")
            var datarr2 = borsaVerileri[i].split("|");

            for (var j = 0; j < 4; j++) {
                if (datarr2[j] != "") {
                    dataContainer.append("<td>" + datarr2[j] + "</td>");
                }
            }

            dataContainer.append("</tr>");
        }
    });

    connection.start().done(function () {
        debugger;
        // Borsa verilerini almaya başlayın.
        borsaHubProxy.invoke('getBorsaVerileri');
    });
</script>
